# 🚀 快速配置和风天气 API

## 第一步：注册和风天气账号

1. 访问：https://console.qweather.com/#/register
2. 注册免费开发者账号

## 第二步：创建项目并生成 API KEY

1. 登录后进入控制台：https://console.qweather.com/project
2. 点击 **创建应用**（如果还没有项目）
3. 填写应用信息：
   - **应用名称**：钓鱼天气应用（或任意名称）
   - **应用类型**：选择 **Web API**
4. 创建项目后，**生成 API KEY**：
   - 进入项目详情页
   - 在 **凭据设置** 区域，点击 **"创建凭据"**
   - **身份认证方式**：选择 **"API KEY"**
   - 输入凭据名称（如"钓鱼天气应用"）
   - 点击创建
   - **复制生成的 API KEY**（格式类似：`ABCD1234EFGH5678`）

⚠️ **重要**：API KEY ≠ Project ID，一定要创建 API KEY 凭据！

## 第三步：配置环境变量

### 本地开发

编辑 `.env` 文件：

```env
QWEATHER_API_KEY=你的API_KEY
QWEATHER_API_HOST=https://devapi.qweather.com
```

**重要**：将 `你的API_KEY` 替换为刚才复制的 API KEY！

### 部署到 Netlify

1. 登录 Netlify: https://app.netlify.com
2. 选择你的项目 (`fish-app-nice`)
3. 进入 **Site settings** → **Environment variables**
4. 添加以下变量：
   - `QWEATHER_API_KEY`: 你的 API KEY（刚才复制的）
   - `QWEATHER_API_HOST`: `https://devapi.qweather.com`

## 第四步：测试

### 本地测试

```bash
# 安装依赖（如果还没安装）
npm install

# 启动 Netlify Dev（包含 Functions）
npx netlify dev
```

访问 http://localhost:8888 测试应用。

### 部署到生产环境

```bash
# 构建
npm run build

# 部署
netlify deploy --prod
```

## 常见问题

### Q: 提示 403 错误或授权失败
**A**: 最常见的原因是使用了 Project ID 而不是 API KEY：
1. ❌ **错误**：使用 Project ID（如 `3DKTNT9DX3`）
2. ✅ **正确**：在控制台创建 API KEY 凭据并使用
3. 检查 `.env` 文件中配置的是 `QWEATHER_API_KEY`
4. API KEY 格式通常是长字符串（如 `ABCD1234EFGH5678IJKL`）

### Q: API 调用失败，返回 401 或 403
**A**: API KEY 可能不正确，请检查：
1. 在和风天气控制台确认 API KEY（不是 Project ID）
2. 确认环境变量拼写正确：`QWEATHER_API_KEY`
3. 重启开发服务器（`npx netlify dev`）

### Q: 本地开发正常，部署后失败
**A**: 检查 Netlify 的环境变量是否正确配置

### Q: 免费版限额是多少？
**A**: 
- 每天 1,000 次请求
- 每分钟无限制
- 个人使用完全足够

## API 限额监控

在和风天气控制台可以查看：
- 今日请求次数
- 剩余配额
- 请求历史

## 需要帮助？

查看详细文档：`和风天气API集成说明.md`
