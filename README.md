# 🎣 钓鱼天气应用

一个基于天气预报判断是否适合钓鱼的H5应用，使用 React.js 和 Tailwind CSS 开发。

## ✨ 功能特点

- 🌤️ **实时天气查询** - 根据城市名称或当前位置获取天气信息
- 🎯 **智能钓鱼指数** - 综合分析温度、风速、湿度、气压等因素
- 📊 **评分系统** - 0-100分钓鱼适宜度评分
- 💡 **智能建议** - 提供钓鱼条件分析和实用建议
- ⭐ **常用钓点** - 保存和管理多个常用钓鱼地点，快速切换查看
- 🗺️ **地图标点** - 在地图上点击任意位置，实时查看该地钓鱼指数
- 📸 **分享功能** - 一键生成精美图片，轻松分享到社交媒体
- 💾 **本地存储** - 钓点数据保存在本地，下次打开自动加载
- 📱 **移动端优化** - 美观的响应式设计，完美适配手机
- 🎨 **现代化UI** - 使用 Tailwind CSS 和 Lucide Icons

## 🚀 快速开始

### 前置要求

- Node.js >= 14.0.0
- npm 或 yarn

### 安装步骤

1. **克隆项目**
```bash
cd fishing-weather-app
```

2. **安装依赖**
```bash
npm install
```

3. **启动开发服务器**
```bash
npm run dev
```

4. **打开浏览器访问** `http://localhost:5173`

### 关于天气API

本应用使用 **Open-Meteo** 天气API，完全免费且无需注册API key。Open-Meteo提供：
- 🆓 完全免费，无请求次数限制
- 🌍 全球天气数据覆盖
- 📊 准确的气象数据
- 🚀 快速响应

## 📖 使用说明

1. **城市查询**
   - 在搜索框输入城市名称（如：北京、上海、武汉黄陂区盘龙城）
   - 支持输入具体区域和街道名称
   - 点击搜索按钮或按回车键

2. **位置定位**
   - 点击"使用当前位置"按钮
   - 授权浏览器获取位置权限
   - 自动获取当前位置的天气信息

3. **地图标点查询**
   - 点击顶部"地图标点"标签切换到地图模式
   - 在地图上点击任意位置（如水库、湖泊、江边等）
   - 地图会显示标记点，并自动获取该位置天气
   - 系统会识别地点名称（如可能的区县、镇等）
   - 查看该位置的钓鱼指数和天气详情
   - 可以收藏该地图标点到常用钓点

4. **管理常用钓点**
   - 查询天气后，点击"收藏当前钓点"按钮
   - 钓点会自动保存到"常用钓点"列表
   - 下次打开应用，钓点列表会自动加载
   - 点击钓点名称即可快速查看该地天气
   - 点击垃圾桶图标可删除不需要的钓点

5. **查看结果**
   - 钓鱼指数卡片：显示是否适合钓鱼及评分
   - 不利因素：列出影响钓鱼的负面条件
   - 提示建议：给出实用的钓鱼建议
   - 天气详情：显示温度、风速、湿度、气压等信息

6. **分享结果** 🆕
   - 查看分析结果后，找到"生成分享图片"按钮
   - 点击按钮，系统会自动生成高清图片
   - 图片包含完整的钓鱼指数和天气详情
   - 自动下载到浏览器的默认下载文件夹
   - 可以分享到微信、朋友圈、钓鱼群等
   - 文件名格式：`钓鱼天气-[地点]-[日期].png`
   - 详细使用方法请查看 [分享功能说明](./分享功能说明.md)

### 💡 使用场景示例

**场景1**：搜索已知地点

你住在武汉江汉区，但常去黄陂区盘龙城钓鱼：
1. 搜索"武汉黄陂区盘龙城"
2. 点击"收藏当前钓点"保存
3. 以后每次打开应用，直接点击"武汉黄陂区盘龙城"即可查看
4. 可以保存多个常去的钓点，如"武汉东湖"、"武汉汤逊湖"等
5. 出门前快速对比各个钓点的天气情况

**场景2**：地图探索新钓点

你想找一个新的钓鱼地点：
1. 切换到"地图标点"模式
2. 在地图上浏览武汉周边的水域
3. 看到一个水库或湖泊，直接在地图上点击
4. 立即查看该位置的钓鱼指数和天气
5. 如果合适，收藏该地点
6. 下次可以直接从常用钓点进入

**场景3**：现场临时查询

你在路上看到一个不错的钓鱼位置：
1. 打开应用，切换到"地图标点"
2. 找到你当前看到的位置（参考地图周边建筑）
3. 点击该位置查看是否适合钓鱼
4. 根据钓鱼指数决定是否停留

**场景4**：分享约钓 🆕

你发现今天天气特别适合钓鱼，想约朋友一起：
1. 查询目标钓点的天气和钓鱼指数
2. 点击"生成分享图片"按钮
3. 图片自动下载到手机
4. 打开微信，发送给钓友："兄弟，今天指数85分，走起！"
5. 也可以发到钓鱼群或朋友圈，让更多人看到
6. 图片包含所有关键信息，一目了然

## 🎯 钓鱼指数算法

应用综合考虑以下因素评估钓鱼条件：

### 温度因素
- **最佳温度**: 15-25°C
- **可接受**: 10-30°C
- **不适宜**: <5°C 或 >35°C

### 风速因素
- **最佳风速**: 2-5 m/s
- **可接受**: <7 m/s
- **不适宜**: >10 m/s

### 天气条件
- ⚡ **雷暴**: 禁止钓鱼（危险）
- 🌧️ **小雨**: 有利于钓鱼
- ⛈️ **大雨**: 不适合钓鱼
- ❄️ **下雪**: 不适合钓鱼
- ☀️ **晴天**: 适合出行

### 气压因素
- **最佳气压**: 990-1020 hPa
- 气压稳定有利于鱼类活动

## 🛠️ 技术栈

- **前端框架**: React 19
- **构建工具**: Vite
- **样式方案**: Tailwind CSS 3
- **图标库**: Lucide React
- **HTTP 客户端**: Axios
- **地图库**: Leaflet + React-Leaflet
- **地图数据**: OpenStreetMap
- **天气数据**: Open-Meteo API (免费，无需API key)
- **地理编码**: OpenStreetMap Nominatim
- **图片生成**: html2canvas (用于分享功能)

## 📦 项目结构

```
fishing-weather-app/
├── src/
│   ├── App.jsx          # 主应用组件
│   ├── MapSelector.jsx  # 地图选择组件
│   ├── main.jsx         # 应用入口
│   └── index.css        # 全局样式
├── public/              # 静态资源
├── .env.example         # 环境变量示例
├── tailwind.config.js   # Tailwind 配置
├── vite.config.js       # Vite 配置
└── package.json         # 项目配置
```

## 🎨 主要功能模块

### 天气数据获取
- 支持城市名称查询
- 支持地理位置定位
- 支持地图标点选择
- 自动获取实时天气数据

### 地图交互
- 基于Leaflet的交互式地图
- 点击地图任意位置查询天气
- 自动标记选中位置
- 显示位置坐标信息
- 逆地理编码识别地点名称

### 钓鱼条件分析
- 多维度评分算法
- 智能条件判断
- 个性化建议生成

### 分享功能 🆕
- 一键生成精美分享图片
- 高清画质（2倍分辨率）
- 包含完整钓鱼指数和天气信息
- 自动命名和下载
- 支持分享到社交平台

### 用户界面
- 渐变背景设计
- 卡片式布局
- 响应式适配
- 加载状态提示
- 错误信息提示

## 📝 开发命令

```bash
# 启动开发服务器
npm run dev

# 构建生产版本
npm run build

# 预览生产版本
npm run preview

# 代码检查
npm run lint
```

## ⚠️ 注意事项

1. **数据准确性**: 天气数据和钓鱼建议仅供参考，实际情况请以现场为准
2. **安全提示**: 钓鱼时请注意人身安全，恶劣天气请勿外出
3. **浏览器支持**: 建议使用 Chrome、Firefox、Safari 等现代浏览器
4. **位置权限**: 使用定位功能需要授权浏览器位置权限
5. **网络要求**: 需要稳定的网络连接以获取天气数据
6. **地理编码**: OpenStreetMap Nominatim API 建议合理使用（请求间隔 >1秒）

## 🔮 未来计划

- [x] ~~常用钓点管理~~ ✅ 已完成
- [x] ~~本地数据持久化~~ ✅ 已完成
- [x] ~~地图标点查询~~ ✅ 已完成
- [x] ~~添加分享功能（生成图片分享到社交平台）~~ ✅ 已完成
- [ ] 添加7天天气预报
- [ ] 钓点天气对比（同时查看多个钓点）
- [ ] 地图上显示多个钓点标记
- [ ] 地图热力图（显示区域钓鱼适宜度）
- [ ] 支持多语言切换
- [ ] 添加钓鱼记录功能（记录每次钓鱼的收获）
- [ ] 集成潮汐信息
- [ ] 钓点评分和推荐
- [ ] 支持离线使用
- [ ] 直接分享到微信/朋友圈（需要后端支持）
- [ ] 钓点照片上传
- [ ] 天气历史记录查询

## 📄 许可证

MIT License

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

## 📞 联系方式

如有问题或建议，欢迎联系开发者。

---

**祝你钓鱼愉快！🎣**
