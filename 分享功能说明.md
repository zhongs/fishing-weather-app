# 分享功能说明

## 功能介绍

钓鱼天气应用新增了**分享功能**，可以将当前的天气分析结果生成为图片并保存到本地，方便分享到社交媒体或发送给朋友。

## 使用方法

### 1. 查询天气
首先需要通过以下任一方式获取天气信息：
- **搜索查询**：在搜索框输入城市名称，点击搜索按钮
- **地图标点**：切换到"地图标点"标签，在地图上点击选择位置
- **当前位置**：点击"使用当前位置"按钮，自动获取当前位置的天气

### 2. 查看分析结果
系统会显示：
- **钓鱼指数评分**：0-100分的综合评分
- **适合程度评级**：优秀/良好/一般/较差/很差
- **不利因素**：影响钓鱼的负面因素列表
- **提示建议**：具体的钓鱼建议和注意事项
- **天气详情**：温度、风速、湿度、气压等详细数据

### 3. 生成分享图片
在分析结果下方，找到**"生成分享图片"**按钮：
- 点击按钮，系统会自动截取分析结果区域
- 生成高清PNG图片（2倍分辨率）
- 图片会自动下载到浏览器的默认下载文件夹
- 文件名格式：`钓鱼天气-[地点名称]-[日期].png`

### 4. 分享图片
下载完成后，您可以：
- 通过微信、QQ等社交软件发送给朋友
- 发布到朋友圈、微博等社交平台
- 保存到相册供日后参考

## 技术特性

### 图片生成技术
- 使用 `html2canvas` 库进行DOM到图片的转换
- 2倍scale保证高清晰度
- 自动处理背景色和样式

### 用户体验优化
- 生成过程中显示加载动画
- 生成成功后显示提示信息
- 错误处理和友好的错误提示
- 响应式按钮设计，支持hover和点击效果

### 图片内容
生成的图片包含：
- 钓鱼指数评分卡片（含评分和评级）
- 不利因素列表
- 提示建议列表
- 完整的天气详情（温度、风速、湿度、气压）
- 地点名称和天气状况

## 注意事项

1. **浏览器兼容性**
   - 建议使用现代浏览器（Chrome、Edge、Safari、Firefox）
   - 部分旧版浏览器可能不支持图片生成功能

2. **文件保存**
   - 图片会自动下载到浏览器的默认下载文件夹
   - 可以在浏览器设置中修改下载位置
   - 某些浏览器可能会弹出下载确认对话框

3. **网络连接**
   - 生成图片不需要网络连接
   - 但获取天气数据需要联网

4. **隐私保护**
   - 所有图片生成都在本地完成
   - 不会上传任何数据到服务器
   - 图片仅保存在您的设备上

## 技术实现

### 依赖库
```json
{
  "html2canvas": "^1.4.1"
}
```

### 核心代码
```javascript
// 生成分享图片
const generateShareImage = async () => {
  const canvas = await html2canvas(resultRef.current, {
    backgroundColor: '#3b82f6',
    scale: 2,
    logging: false,
    useCORS: true,
    allowTaint: true
  });
  
  const image = canvas.toDataURL('image/png');
  const link = document.createElement('a');
  link.href = image;
  link.download = `钓鱼天气-${weather?.name}-${new Date().toLocaleDateString('zh-CN')}.png`;
  link.click();
};
```

## 未来计划

- [ ] 添加更多分享选项（直接分享到社交平台）
- [ ] 支持自定义图片样式和布局
- [ ] 添加图片水印和二维码
- [ ] 支持生成多种格式（JPG、WEBP）
- [ ] 添加图片编辑功能
- [ ] 支持批量生成历史记录图片

## 反馈与建议

如果您在使用过程中遇到问题或有改进建议，欢迎反馈！
